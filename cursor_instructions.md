# Cursor Instructions: –ö—É—Ä—Å–æ–≤–∏–π –ø—Ä–æ–µ–∫—Ç ‚Äî ¬´–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞¬ª (–í–∞—Ä—ñ–∞–Ω—Ç 20)

## üß≠ –ó–∞–≥–∞–ª—å–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –¥–ª—è Cursor

**–ó–∞–≤–¥–∞–Ω–Ω—è:** —Ä–æ–∑—Ä–æ–±–∏—Ç–∏ –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω—É —Å–∏—Å—Ç–µ–º—É ¬´–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞¬ª (–≤–∞—Ä—ñ–∞–Ω—Ç 20) –¥–ª—è –∫—É—Ä—Å–æ–≤–æ—ó —Ä–æ–±–æ—Ç–∏ –∑ –¥–∏—Å—Ü–∏–ø–ª—ñ–Ω–∏ *¬´–î–æ–∫—É–º–µ–Ω—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ–≥—Ä–∞–º–Ω–æ–≥–æ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è —Ç–∞ —à–∞–±–ª–æ–Ω–∏ –ø—Ä–æ–µ–∫—Ç—É–≤–∞–Ω–Ω—è¬ª*.

---

### üîß –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω—ñ –≤–∏–º–æ–≥–∏
- **–ú–æ–≤–∞:** Python 3.12+
- **–§—Ä–µ–π–º–≤–æ—Ä–∫:** Flask (REST-–ø—ñ–¥—Ö—ñ–¥)
- **–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö:** SQLite 3
- **ORM:** SQLAlchemy
- **–®–∞–±–ª–æ–Ω—ñ–∑–∞—Ü—ñ—è:** Jinja2
- **Frontend:** HTML / CSS / Bootstrap 5
- **–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞:** —Ç—Ä–∏-—Ä—ñ–≤–Ω–µ–≤–∞ (presentation ‚Üí service ‚Üí data)
- **Design patterns (GoF):**
  - Singleton ‚Äî –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —î–¥–∏–Ω–æ–≥–æ –µ–∫–∑–µ–º–ø–ª—è—Ä–∞ –∑‚Äô—î–¥–Ω–∞–Ω–Ω—è –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö.  
  - Factory Method ‚Äî –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø—ñ–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ (–∑–≤–∏—á–∞–π–Ω–∏–π, –ø—ñ–ª—å–≥–æ–≤–∏–π).  
  - Strategy ‚Äî –¥–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É –≤–∞—Ä—Ç–æ—Å—Ç—ñ –ø—Ä–æ–∫–∞—Ç—É –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–∏–ø—É –∫–Ω–∏–≥–∏ –∞–±–æ —Ç–µ—Ä–º—ñ–Ω—É –æ—Ä–µ–Ω–¥–∏.  
  - Observer ‚Äî –¥–ª—è —Å–∏—Å—Ç–µ–º–∏ —Å–ø–æ–≤—ñ—â–µ–Ω—å (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –Ω–∞–≥–∞–¥—É–≤–∞–Ω–Ω—è –ø—Ä–æ –ø—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–Ω—è).  
  - Repository ‚Äî –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –¥–∞–Ω–∏–º–∏ (—ñ–∑–æ–ª—é—î –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫—É –≤—ñ–¥ SQL-–∑–∞–ø–∏—Ç—ñ–≤).

---

### üìò –ü—Ä–µ–¥–º–µ—Ç–Ω–∞ –æ–±–ª–∞—Å—Ç—å ‚Äî ¬´–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞¬ª

–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –Ω–∞–¥–∞—î –∫–Ω–∏–≥–∏ –≤ —Ç–∏–º—á–∞—Å–æ–≤–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞–Ω–Ω—è (–ø—Ä–æ–∫–∞—Ç) –∑–∞ –∑–∞—Å—Ç–∞–≤–Ω—É –≤–∞—Ä—Ç—ñ—Å—Ç—å —ñ –ø–ª–∞—Ç—É –ø—Ä–∏ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—ñ.  
–ù–µ–æ–±—Ö—ñ–¥–Ω–æ –≤—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏:
- –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø—Ä–∏–º—ñ—Ä–Ω–∏–∫—ñ–≤;
- —Ñ—ñ–Ω–∞–Ω—Å–æ–≤—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó;
- –æ–±–ª—ñ–∫ —á–∏—Ç–∞—á—ñ–≤ (–∫–ª—ñ—î–Ω—Ç—ñ–≤);
- —à—Ç—Ä–∞—Ñ–∏ —Ç–∞ –∑–Ω–∏–∂–∫–∏.

---

### üß© –û—Å–Ω–æ–≤–Ω—ñ —Å—É—Ç–Ω–æ—Å—Ç—ñ —Å–∏—Å—Ç–µ–º–∏

| –°—É—Ç–Ω—ñ—Å—Ç—å | –ê—Ç—Ä–∏–±—É—Ç–∏ | –û–ø–∏—Å |
|-----------|-----------|------|
| **Book** | id, title, author, genre, collateral_value, daily_rent_price, available_copies | –ö–Ω–∏–≥–∞, —è–∫—É –º–æ–∂–Ω–∞ –≤–∏–¥–∞—Ç–∏ |
| **Reader** | id, full_name, address, phone, category | –ß–∏—Ç–∞—á –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ |
| **Rental** | id, book_id, reader_id, rent_date, due_date, return_date, fine_amount | –í–∏–¥–∞—á–∞ –∫–Ω–∏–≥–∏ |
| **Payment** | id, rental_id, total_amount, paid_date | –ü–ª–∞—Ç—ñ–∂ (—Ñ—ñ–∫—Å—É—î —Ñ—ñ–Ω–∞–Ω—Å–æ–≤—É –æ–ø–µ—Ä–∞—Ü—ñ—é) |
| **DiscountPolicy** | get_discount() | –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –∑–Ω–∏–∂–∫–∏ –∑–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—î—é —á–∏—Ç–∞—á–∞ |
| **Notification** | id, reader_id, message, created_at, is_read | –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ |

---

### üß† –ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞
1. –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è —á–∏—Ç–∞—á—ñ–≤ (–∑–≤–∏—á–∞–π–Ω–∏–π, –ø—ñ–ª—å–≥–æ–≤–∏–π, VIP).  
2. –î–æ–¥–∞–≤–∞–Ω–Ω—è / —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –∫–Ω–∏–≥.  
3. –í–∏–¥–∞—á–∞ –∫–Ω–∏–≥–∏: –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ, –¥–∞—Ç–∞ –≤–∏–¥–∞—á—ñ, –±–ª–æ–∫—É–≤–∞–Ω–Ω—è –ø—Ä–∏–º—ñ—Ä–Ω–∏–∫–∞.  
4. –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –∫–Ω–∏–≥–∏: —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –æ—Ä–µ–Ω–¥–∏, —à—Ç—Ä–∞—Ñ—ñ–≤, –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∏–º—ñ—Ä–Ω–∏–∫—ñ–≤, –∑–∞–ø–∏—Å –ø–ª–∞—Ç–µ–∂—É.  
5. –ó–≤—ñ—Ç–∏:
   - –ø–æ –∫–Ω–∏–∂–∫–æ–≤–æ–º—É —Ñ–æ–Ω–¥—É (–¥–æ—Å—Ç—É–ø–Ω—ñ / –≤–∏–¥–∞–Ω—ñ);  
   - –ø–æ –≤–∏–¥–∞–Ω–∏—Ö –∫–Ω–∏–≥–∞—Ö –∑ –ø—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–Ω—è–º;  
   - —Ñ—ñ–Ω–∞–Ω—Å–æ–≤–∏–π –∑–≤—ñ—Ç (–¥–æ—Ö–æ–¥–∏ –∑–∞ –ø–µ—Ä—ñ–æ–¥).  

---

### üèó –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```
library_app/
‚îÇ
‚îú‚îÄ‚îÄ app.py
‚îú‚îÄ‚îÄ config.py
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ book.py
‚îÇ   ‚îú‚îÄ‚îÄ reader.py
‚îÇ   ‚îú‚îÄ‚îÄ rental.py
‚îÇ   ‚îú‚îÄ‚îÄ payment.py
‚îÇ   ‚îú‚îÄ‚îÄ notification.py
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ repositories/
‚îÇ   ‚îú‚îÄ‚îÄ book_repository.py
‚îÇ   ‚îú‚îÄ‚îÄ reader_repository.py
‚îÇ   ‚îú‚îÄ‚îÄ rental_repository.py
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ rental_service.py
‚îÇ   ‚îú‚îÄ‚îÄ report_service.py
‚îÇ   ‚îú‚îÄ‚îÄ discount_strategy.py
‚îÇ   ‚îú‚îÄ‚îÄ notification_service.py
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ controllers/
‚îÇ   ‚îú‚îÄ‚îÄ books_controller.py
‚îÇ   ‚îú‚îÄ‚îÄ readers_controller.py
‚îÇ   ‚îú‚îÄ‚îÄ rentals_controller.py
‚îÇ   ‚îú‚îÄ‚îÄ reports_controller.py
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îú‚îÄ‚îÄ base.html
‚îÇ   ‚îú‚îÄ‚îÄ books.html
‚îÇ   ‚îú‚îÄ‚îÄ readers.html
‚îÇ   ‚îú‚îÄ‚îÄ rentals.html
‚îÇ   ‚îú‚îÄ‚îÄ reports.html
‚îÇ   ‚îî‚îÄ‚îÄ notifications.html
‚îú‚îÄ‚îÄ static/
‚îî‚îÄ‚îÄ README.md
```

---

### ‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ñ –∫—Ä–æ–∫–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

1. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞:
```bash
python3 -m venv venv
source venv/bin/activate
pip install flask flask_sqlalchemy flask_bootstrap
```

2. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ë–î (Singleton):
```python
# config.py
from flask_sqlalchemy import SQLAlchemy

class Database:
    _instance = None

    @staticmethod
    def instance():
        if Database._instance is None:
            Database._instance = SQLAlchemy()
        return Database._instance
```

3. –ú–æ–¥–µ–ª—ñ SQLAlchemy –∑ ForeignKey —Ç–∞ relationship.
4. Repository Layer ‚Äî —ñ–Ω–∫–∞–ø—Å—É–ª—é—î SQL-–æ–ø–µ—Ä–∞—Ü—ñ—ó.
5. Service Layer ‚Äî –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞: –æ—Ä–µ–Ω–¥–∞, –∑–Ω–∏–∂–∫–∏, –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.
6. Strategy Pattern ‚Äî –∑–Ω–∏–∂–∫–∏ –∑–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—î—é –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
7. Observer Pattern ‚Äî –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–Ω—è.
8. REST Controller Layer ‚Äî CRUD-–º–∞—Ä—à—Ä—É—Ç–∏.
9. Frontend ‚Äî HTML —à–∞–±–ª–æ–Ω–∏ + Bootstrap.
10. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ pytest.

---

### üìä –ó–≤—ñ—Ç–∏ (ReportService)
1. –ó–≤—ñ—Ç –ø–æ –∫–Ω–∏–∂–∫–æ–≤–æ–º—É —Ñ–æ–Ω–¥—É.  
2. –ó–≤—ñ—Ç –ø–æ –ø—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–∏—Ö –∫–Ω–∏–≥–∞—Ö.  
3. –§—ñ–Ω–∞–Ω—Å–æ–≤–∏–π –∑–≤—ñ—Ç –∑–∞ –ø–µ—Ä—ñ–æ–¥.

---

### üßæ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
Cursor –º–∞—î —Å—Ç–≤–æ—Ä–∏—Ç–∏:
- `README.md` (–æ–ø–∏—Å, —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è, –ø–∞—Ç–µ—Ä–Ω–∏);
- `report/use_case_diagram.png`;
- `report/class_diagram.png`;
- `docs/coursework.md` (–∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞, —Ç–µ—Å—Ç–∏, –≤–∏—Å–Ω–æ–≤–∫–∏).

---

### üí¨ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ –ø–∞—Ç–µ—Ä–Ω–∏

| –ü–∞—Ç–µ—Ä–Ω | –ú—ñ—Å—Ü–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è | –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è |
|--------|--------------------|--------------|
| Singleton | Database | –Ñ–¥–∏–Ω–∏–π –µ–∫–∑–µ–º–ø–ª—è—Ä –ë–î |
| Factory Method | –ö–ª–∞—Å–∏ —á–∏—Ç–∞—á—ñ–≤ | –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∏–ø—ñ–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ |
| Strategy | –ó–Ω–∏–∂–∫–∏ / –æ—Ä–µ–Ω–¥–∞ | –ì–Ω—É—á–∫—ñ—Å—Ç—å —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—ñ–≤ |
| Observer | –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è | –†–µ–∞–∫—Ü—ñ—è –Ω–∞ –ø–æ–¥—ñ—ó |
| Repository | –†–æ–±–æ—Ç–∞ –∑ –ë–î | –í—ñ–¥–æ–∫—Ä–µ–º–ª–µ–Ω–Ω—è –ª–æ–≥—ñ–∫–∏ |

---

### üöÄ –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

Cursor –ø–æ–≤–∏–Ω–µ–Ω —Å—Ç–≤–æ—Ä–∏—Ç–∏:
- –≤–µ–±-–¥–æ–¥–∞—Ç–æ–∫ Flask + SQLite;
- –±–∞–∑—É `library.db`;
- REST-–º–∞—Ä—à—Ä—É—Ç–∏ `/books`, `/readers`, `/rentals`, `/reports`;
- 5 GoF –ø–∞—Ç–µ—Ä–Ω—ñ–≤;
- UI –Ω–∞ Bootstrap;
- –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é –¥–ª—è –∫—É—Ä—Å–æ–≤–æ—ó.
